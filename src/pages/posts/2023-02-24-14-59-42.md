---
templateKey: blog-post
title: Angular の scrollPositionRestoration の挙動確認と、最適なヘッダー／フッターレイアウトの模索
date: 2023-02-24T04:29:04.862Z
tags:
  - draft
  - Angular
  - TypeScript
  - SPA
---

Web アプリで典型的な 固定ヘッダー／縦スクロール可能なコンテンツ／固定フッター という典型的なレイアウトを実装するとき、これまでは以下のようにしていました。

```html
<header style="height: 40px;">HEADER</header>

<main>
  <div style="
    height: calc(100vh - 40px - 30px);;
    overflow-y: scroll;
  ">
    コンテンツ群
    …
  </div>

  <footer style="height: 30px;">FOOTER</footer>
</main>   
```

ヘッダーとフッターの高さを固定して、その間の領域を埋め、その子要素をスクロール可能とするものです。

一方で、Angular には ``scrollPositionRestoration`` という画面遷移時のスクロール位置を制御する機能があります。

``scrollPositionRestoration: true`` の時には、ブラウザの戻る(``history.back()``) 時に、以前のY座標(top)を復元しようとします。これは、一覧画面→1件選択して詳細画面→一覧画面に戻ってきたとき、以前の表示位置が復元されていることが期待できる機能です。

そこで、冒頭のようなレイアウトのとき、``scrollPositionRestoration: true`` は有効に機能するのかを確認しました。

## 1. overflow-y: scroll に scrollPositionRestoration は効かない

結果は「効かない」でした。